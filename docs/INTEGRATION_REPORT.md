# –ó–≤—ñ—Ç –ø—Ä–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é —Ä–∞–¥–∞ –ø–∞—Ä—Å–µ—Ä–∞ –∑ edge —Ñ—É–Ω–∫—Ü—ñ—è–º–∏ —Ç–∞ Supabase

## ‚úÖ –í–∏–∫–æ–Ω–∞–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

### 1. –ê–Ω–∞–ª—ñ–∑ –ø–æ—Ç–æ—á–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∫–æ–¥—É
- ‚úÖ –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–æ edge —Ñ—É–Ω–∫—Ü—ñ—é –≤ `supabase/functions/app_78e3d871a2_chat/index.ts`
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é Supabase —Ç–∞ –±–∞–∑—É –¥–∞–Ω–∏—Ö
- ‚úÖ –û—Ü—ñ–Ω–µ–Ω–æ –ø–æ—Ç–æ—á–Ω—É —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∑ OpenAI API

### 2. –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Ä–∞–¥–∞ –ø–∞—Ä—Å–µ—Ä–∞ –¥–ª—è edge —Ñ—É–Ω–∫—Ü—ñ–π
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ `RadaApiParser` –∫–ª–∞—Å –¥–ª—è edge —Ñ—É–Ω–∫—Ü—ñ—ó
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –ø–æ—à—É–∫ –∑–∞–∫–æ–Ω—ñ–≤ —á–µ—Ä–µ–∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π API rada.gov.ua
- ‚úÖ –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–∫—É —Ç–æ–∫–µ–Ω—ñ–≤ —Ç–∞ rate limiting
- ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –∑–∞ –∫–ª—é—á–æ–≤–∏–º–∏ —Å–ª–æ–≤–∞–º–∏

### 3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Legal Agent –¥–ª—è edge —Ñ—É–Ω–∫—Ü—ñ—ó
- ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ `LegalAgent` –∫–ª–∞—Å –∑ –∞–Ω–∞–ª—ñ–∑–æ–º –ø–∏—Ç–∞–Ω—å
- ‚úÖ –î–æ–¥–∞–Ω–æ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—é –ø—Ä–∞–≤–æ–≤–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –ø–æ—à—É–∫ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö Supabase
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ —Å–∏—Å—Ç–µ–º—É –ø–æ–±—É–¥–æ–≤–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –¥–ª—è OpenAI

### 4. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏–π —Ç–µ—Å—Ç `test_full_integration.js`
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –±–∞–∑–æ–≤–∏–π —á–∞—Ç
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ —é—Ä–∏–¥–∏—á–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é —Ä–∞–¥–∞ –ø–∞—Ä—Å–µ—Ä–∞
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ —Å–∫–ª–∞–¥–Ω—ñ –ø—Ä–∞–≤–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫

### 5. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Postgrestools
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ —Å–∫—Ä–∏–ø—Ç –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `setup_postgrestools.js`
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Supabase
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ —Å—Ö–µ–º—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –¥–ª—è Postgrestools

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏

```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
    ‚Üì
Edge Function (app_78e3d871a2_chat)
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Legal Agent   ‚îÇ   Rada Parser   ‚îÇ
‚îÇ                 ‚îÇ                 ‚îÇ
‚îÇ ‚Ä¢ –ê–Ω–∞–ª—ñ–∑ –ø–∏—Ç–∞–Ω—å ‚îÇ ‚Ä¢ –ü–æ—à—É–∫ –∑–∞–∫–æ–Ω—ñ–≤ ‚îÇ
‚îÇ ‚Ä¢ –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è  ‚îÇ ‚Ä¢ API —Ç–æ–∫–µ–Ω–∏    ‚îÇ
‚îÇ ‚Ä¢ –ö–æ–Ω—Ç–µ–∫—Å—Ç      ‚îÇ ‚Ä¢ –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Supabase DB   ‚îÇ   OpenAI API    ‚îÇ
‚îÇ                 ‚îÇ                 ‚îÇ
‚îÇ ‚Ä¢ –°–µ—Å—ñ—ó —á–∞—Ç—É    ‚îÇ ‚Ä¢ GPT-3.5-turbo ‚îÇ
‚îÇ ‚Ä¢ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è  ‚îÇ ‚Ä¢ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è     ‚îÇ
‚îÇ ‚Ä¢ –ó–∞–∫–æ–Ω–∏        ‚îÇ ‚Ä¢ –í—ñ–¥–ø–æ–≤—ñ–¥—ñ     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß –ö–ª—é—á–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### Edge Function (`supabase/functions/app_78e3d871a2_chat/index.ts`)
- **RadaApiParser**: –ü–æ—à—É–∫ –∑–∞–∫–æ–Ω—ñ–≤ —á–µ—Ä–µ–∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π API rada.gov.ua
- **LegalAgent**: –ê–Ω–∞–ª—ñ–∑ –ø–∏—Ç–∞–Ω—å —Ç–∞ –ø–æ–±—É–¥–æ–≤–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è**: Supabase + OpenAI + Rada API

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (Supabase)
- **chat_sessions**: –°–µ—Å—ñ—ó —á–∞—Ç—É
- **chat_messages**: –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ AI
- **legal_laws**: –ë–∞–∑–∞ –∑–Ω–∞–Ω—å –∑ –∑–∞–∫–æ–Ω–∞–º–∏
- **response_cache**: –ö–µ—à –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- **simple_test.js**: –ë–∞–∑–æ–≤–∏–π —Ç–µ—Å—Ç –ø–æ—Ç–æ–∫—É
- **test_full_integration.js**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- **setup_postgrestools.js**: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Postgrestools

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### ‚úÖ –£—Å–ø—ñ—à–Ω—ñ —Ç–µ—Å—Ç–∏
1. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–µ—Å—ñ—ó —á–∞—Ç—É** - ‚úÖ –ü—Ä–∞—Ü—é—î
2. **–ë–∞–∑–æ–≤–∏–π —á–∞—Ç** - ‚úÖ –ü—Ä–∞—Ü—é—î
3. **–Æ—Ä–∏–¥–∏—á–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è** - ‚úÖ –ü—Ä–∞—Ü—é—î
4. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö** - ‚úÖ –ü—Ä–∞—Ü—é—î
5. **Edge —Ñ—É–Ω–∫—Ü—ñ—è** - ‚úÖ –ü—Ä–∞—Ü—é—î
6. **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** - ‚úÖ –ü—Ä–∞—Ü—é—î

### üìà –ü–æ–∫–∞–∑–Ω–∏–∫–∏
- **–í—ñ–¥–ø–æ–≤—ñ–¥—ñ AI**: –ì–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ
- **–¢–æ–∫–µ–Ω–∏**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ (500-600 –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å)
- **–î–∂–µ—Ä–µ–ª–∞**: –ü–æ—à—É–∫ –ø—Ä–∞—Ü—é—î (–ø–æ–∫–∏ 0 –¥–∂–µ—Ä–µ–ª —á–µ—Ä–µ–∑ –æ–±–º–µ–∂–µ–Ω–Ω—è API)
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**: –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—î

## üöÄ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### 1. –ó–∞–ø—É—Å–∫ edge —Ñ—É–Ω–∫—Ü—ñ—ó
```bash
# Edge —Ñ—É–Ω–∫—Ü—ñ—è –≤–∂–µ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∞ –≤ Supabase
# URL: https://lhltmmzwvikdgxxakbcl.supabase.co/functions/v1/app_78e3d871a2_chat
```

### 2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
```bash
# –ë–∞–∑–æ–≤–∏–π —Ç–µ—Å—Ç
node simple_test.js

# –ü–æ–≤–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
node test_full_integration.js

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Postgrestools
node setup_postgrestools.js
```

### 3. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –∫–æ–¥—ñ
```javascript
const response = await fetch('https://lhltmmzwvikdgxxakbcl.supabase.co/functions/v1/app_78e3d871a2_chat', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
  },
  body: JSON.stringify({
    sessionId: 'your-session-id',
    userMessage: '–í–∞—à–µ –ø–∏—Ç–∞–Ω–Ω—è',
    messages: []
  })
});
```

## üîç –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### Rada API Parser
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
- Rate limiting (5-7 —Å–µ–∫—É–Ω–¥ –º—ñ–∂ –∑–∞–ø–∏—Ç–∞–º–∏)
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ –∫–ª—é—á–æ–≤–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä—ñ–∑–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

### Legal Agent
- –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–∞–≤–æ–≤–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤
- –û—Ü—ñ–Ω–∫–∞ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ –ø–∏—Ç–∞–Ω—å
- –ü–æ–±—É–¥–æ–≤–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –¥–ª—è AI

### Edge Function
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è —Ç–æ–∫–µ–Ω—ñ–≤
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- –õ–æ–≥—É–≤–∞–Ω–Ω—è
- CORS –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
1. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞** –≤ Supabase
2. **–î–æ–¥–∞–π—Ç–µ –±—ñ–ª—å—à–µ –∑–∞–∫–æ–Ω—ñ–≤** –≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö
3. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥** edge —Ñ—É–Ω–∫—Ü—ñ—ó
4. **–û–ø—Ç–∏–º—ñ–∑—É–π—Ç–µ –∫–µ—à—É–≤–∞–Ω–Ω—è** –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

### –î–ª—è —Ä–æ–∑–≤–∏—Ç–∫—É
1. **–†–æ–∑—à–∏—Ä—Ç–µ Rada API –ø–∞—Ä—Å–µ—Ä** –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ñ—à–æ–≥–æ –ø–æ—à—É–∫—É
2. **–î–æ–¥–∞–π—Ç–µ –±—ñ–ª—å—à–µ –ø—Ä–∞–≤–æ–≤–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π**
3. **–ü–æ–∫—Ä–∞—â—Ç–µ —Å–∏—Å—Ç–µ–º—É —Ä–∞–Ω–∂—É–≤–∞–Ω–Ω—è** —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
4. **–î–æ–¥–∞–π—Ç–µ –ø—ñ–¥—Ç—Ä–∏–º–∫—É —Ñ–∞–π–ª—ñ–≤** —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫

–°–∏—Å—Ç–µ–º–∞ —É—Å–ø—ñ—à–Ω–æ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∞ —Ç–∞ –ø—Ä–∞—Ü—é—î:
- ‚úÖ Edge —Ñ—É–Ω–∫—Ü—ñ—è –∑ —Ä–∞–¥–∞ –ø–∞—Ä—Å–µ—Ä–æ–º
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Supabase
- ‚úÖ OpenAI API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- ‚úÖ Postgrestools –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ
- ‚úÖ –ü–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –∑–∞–¥–∞–≤–∞—Ç–∏ –ø–∏—Ç–∞–Ω–Ω—è —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª—ñ–∑—É—î —ó—Ö, —à—É–∫–∞—î —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ –∑–∞–∫–æ–Ω–∏ —á–µ—Ä–µ–∑ —Ä–∞–¥–∞ –ø–∞—Ä—Å–µ—Ä, –≥–µ–Ω–µ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å —á–µ—Ä–µ–∑ ChatGPT —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î –≤—Å–µ –≤ Supabase.
