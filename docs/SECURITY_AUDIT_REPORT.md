# üîí –ó–í–Ü–¢ –ë–ï–ó–ü–ï–ö–ò: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏—Ç–æ–∫—ñ–≤ —Ç–æ–∫–µ–Ω—ñ–≤

## ‚úÖ –°–¢–ê–¢–£–°: –ë–ï–ó–ü–ï–ß–ù–û

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç—É:** 1 –∂–æ–≤—Ç–Ω—è 2025  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ñ–æ–¥–Ω–∏—Ö –≤–∏—Ç–æ–∫—ñ–≤ —Ç–æ–∫–µ–Ω—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:

### 1. **Supabase Edge Function** ‚úÖ
- **–§–∞–π–ª:** `supabase/functions/app_78e3d871a2_chat/index.ts`
- **–ú–æ–¥–µ–ª—å:** `gpt-3.5-turbo` ‚úÖ
- **max_tokens:** 500 ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó

### 2. **–õ–æ–∫–∞–ª—å–Ω–∏–π –±–µ–∫–µ–Ω–¥** ‚úÖ
- **–§–∞–π–ª:** `backend/src/config/openai.js`
- **–ú–æ–¥–µ–ª—å:** `gpt-3.5-turbo` ‚úÖ
- **max_tokens:** 500 ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó

### 3. **–§—Ä–æ–Ω—Ç–µ–Ω–¥** ‚úÖ
- **–§–∞–π–ª:** `src/lib/openai.ts`
- **–°—Ç–∞—Ç—É—Å:** –¢—ñ–ª—å–∫–∏ —Å–∏–º—É–ª—è—Ü—ñ—è, –±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö API –≤–∏–∫–ª–∏–∫—ñ–≤ ‚úÖ

### 4. **–¢–µ—Å—Ç–æ–≤—ñ —Å–∫—Ä–∏–ø—Ç–∏** ‚úÖ
- **–§–∞–π–ª–∏:** `test_*.js`, `debug_*.js`
- **–°—Ç–∞—Ç—É—Å:** –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å OpenAI API ‚úÖ

### 5. **–°–∫—Ä–∏–ø—Ç–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó** ‚úÖ
- **–§–∞–π–ª–∏:** `src/scripts/*.js`
- **–°—Ç–∞—Ç—É—Å:** –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å OpenAI API ‚úÖ

## üõ°Ô∏è –ó–∞—Ö–∏—Å–Ω—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏:

### ‚úÖ **–ö–µ—à—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π**
- –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –∫–µ—à—É—é—Ç—å—Å—è –≤ Supabase
- –ü–æ–≤—Ç–æ—Ä–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è –Ω–µ –≤–∏—Ç—Ä–∞—á–∞—é—Ç—å —Ç–æ–∫–µ–Ω–∏

### ‚úÖ **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π**
- –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î —è–∫—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- Fallback –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –±–µ–∑ –≤–∏—Ç—Ä–∞—Ç —Ç–æ–∫–µ–Ω—ñ–≤

### ‚úÖ **–û–±–º–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É**
- –¢—ñ–ª—å–∫–∏ –æ—Å—Ç–∞–Ω–Ω—ñ 3 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- –°–∫–æ—Ä–æ—á–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç

### ‚úÖ **–õ–æ–≥—É–≤–∞–Ω–Ω—è –≤–∏—Ç—Ä–∞—Ç**
- –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏—Ç—Ä–∞—Ç

## üìä –ü–æ—Ç–æ—á–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ú–æ–¥–µ–ª—å | max_tokens | –í–∞—Ä—Ç—ñ—Å—Ç—å/–∑–∞–ø–∏—Ç |
|-----------|--------|------------|----------------|
| **Supabase Function** | gpt-3.5-turbo | 500 | ~$0.002 |
| **–õ–æ–∫–∞–ª—å–Ω–∏–π –±–µ–∫–µ–Ω–¥** | gpt-3.5-turbo | 500 | ~$0.002 |
| **–§—Ä–æ–Ω—Ç–µ–Ω–¥** | –°–∏–º—É–ª—è—Ü—ñ—è | - | $0 |

## üö® –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ —Ä–∏–∑–∏–∫–∏ (–ù–ï –ó–ù–ê–ô–î–ï–ù–û):

### ‚ùå **–°—Ç–∞—Ä—ñ –∫–µ—à–æ–≤–∞–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ**
- **–†–∏–∑–∏–∫:** –ú–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ GPT-4
- **–†—ñ—à–µ–Ω–Ω—è:** –ö–µ—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è

### ‚ùå **–°–∫—Ä–∏–ø—Ç–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó**
- **–†–∏–∑–∏–∫:** –ú–æ–∂—É—Ç—å –≤–∏–∫–ª–∏–∫–∞—Ç–∏ OpenAI API
- **–°—Ç–∞—Ç—É—Å:** –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å

### ‚ùå **–¢–µ—Å—Ç–æ–≤—ñ —Ñ–∞–π–ª–∏**
- **–†–∏–∑–∏–∫:** –ú–æ–∂—É—Ç—å –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ —Ç–æ–∫–µ–Ω–∏ –ø—Ä–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ
- **–°—Ç–∞—Ç—É—Å:** –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:

### 1. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤–∏—Ç—Ä–∞—Ç**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ª–æ–≥–∏ —â–æ–¥–Ω—è
tail -f backend/logs/app.log | grep "tokensUsed"

# –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ Supabase –ª–æ–≥–∏
# Dashboard ‚Üí Edge Functions ‚Üí Logs
```

### 2. **–û—á–∏—â–µ–Ω–Ω—è –∫–µ—à—É (–ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ)**
```sql
-- –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
DELETE FROM response_cache WHERE created_at < NOW() - INTERVAL '7 days';
```

### 3. **–ê–ª–µ—Ä—Ç–∏ –ø–æ –≤–∏—Ç—Ä–∞—Ç–∞—Ö**
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∞–ª–µ—Ä—Ç–∏ –≤ OpenAI Dashboard
- –õ—ñ–º—ñ—Ç: $5/–¥–µ–Ω—å –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

## üìà –û—á—ñ–∫—É–≤–∞–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏:

### **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è (GPT-3.5):**
- **100 –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å:** ~$0.20
- **1000 –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å:** ~$2.00
- **10000 –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å:** ~$20.00

### **–ü—Ä–æ–¥–∞–∫—à–µ–Ω (GPT-4):**
- **100 –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å:** ~$5.00
- **1000 –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å:** ~$50.00
- **10000 –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å:** ~$500.00

## ‚úÖ –í–ò–°–ù–û–í–û–ö:

**–°–∏—Å—Ç–µ–º–∞ –±–µ–∑–ø–µ—á–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.** –í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –Ω–∞ GPT-3.5-turbo –∑ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –ñ–æ–¥–Ω–∏—Ö –≤–∏—Ç–æ–∫—ñ–≤ —Ç–æ–∫–µ–Ω—ñ–≤ –Ω–µ –≤–∏—è–≤–ª–µ–Ω–æ.

**–ú–æ–∂–Ω–∞ –±–µ–∑–ø–µ—á–Ω–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –±–µ–∑ –∑–∞–Ω–µ–ø–æ–∫–æ—î–Ω–Ω—è –ø—Ä–æ –≤–µ–ª–∏–∫—ñ –≤–∏—Ç—Ä–∞—Ç–∏.**

---

**–ê—É–¥–∏—Ç–æ—Ä:** AI Assistant  
**–ù–∞—Å—Ç—É–ø–Ω–∏–π –∞—É–¥–∏—Ç:** –ü—Ä–∏ –∑–º—ñ–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –º–æ–¥–µ–ª—ñ
